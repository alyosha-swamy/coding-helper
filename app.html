<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C++ Coding Challenges</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/clike/clike.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <style>
        /* ... (previous styles remain the same) ... */
    </style>
</head>
<body>
    <!-- ... (previous HTML structure remains the same) ... -->
    <script>
        // ... (previous JavaScript remains the same until runCodeBtn.onclick) ...

        runCodeBtn.onclick = async () => {
            const code = editor.getValue();
            output.textContent = "Running code...";
            try {
                const response = await fetch('http://localhost:3000/run-code', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ code }),
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                if (data.error) {
                    output.textContent = `Error: ${data.error}`;
                } else {
                    output.textContent = `Output:\n${data.output}`;
                }
            } catch (error) {
                output.textContent = `Error: ${error.message}. Make sure the backend server is running at http://localhost:3000`;
            }
        };

        runTestsBtn.onclick = async () => {
            const code = editor.getValue();
            output.textContent = "Running tests...";
            try {
                const response = await fetch('http://localhost:3000/run-tests', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ questionId: currentQuestionId, code }),
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                output.textContent = `Test results: ${data.result}`;
            } catch (error) {
                output.textContent = `Error: ${error.message}. Make sure the backend server is running at http://localhost:3000`;
            }
        };

        // Load the first question by default
        loadQuestion(1);
    </script>
</body>
</html>
